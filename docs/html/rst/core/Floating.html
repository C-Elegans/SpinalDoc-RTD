

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Description &mdash; SpinalHDL 1.11 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> SpinalHDL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About SpinalHDL:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SpinalHDL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Description</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/rst/core/Floating.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="description">
<h1>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">Floating</span></code> type corresponds to IEEE-754 encoded numbers. A second type called <code class="docutils literal notranslate"><span class="pre">RecFloating</span></code> helps simplifying design by recoding
the floating point value.</p>
<p>It’s composed of a sign bit, an exponent field and a mantissa field. The widths of the different fields are defined in the IEEE-754 or
de-facto standards.</p>
<p>This type can be used by using the following import</p>
<div class="highlight-scala notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nn">spinal.lib.experimental.math._</span>
</pre></div>
</div>
<div class="section" id="ieee-754-floating-format">
<h2>IEEE-754 floating format<a class="headerlink" href="#ieee-754-floating-format" title="Permalink to this headline">¶</a></h2>
<p>The numbers are encoded into IEEE-754 <a class="reference external" href="https://en.wikipedia.org/wiki/IEEE_floating_point">floating point format</a>.</p>
</div>
<div class="section" id="recoded-floating-format">
<h2>Recoded floating format<a class="headerlink" href="#recoded-floating-format" title="Permalink to this headline">¶</a></h2>
<p>Since IEEE-754 has some quirks about denormalized numbers and special values, Berkeley proposed another way of recoding floating
point values.</p>
<p>The mantissa is modified so that denormalized values can be treated the same as the normalized ones.</p>
<p>The exponent field is one bit larger that one of the IEEE-754 number.</p>
<p>The sign bit is kept unchanged between the two
encodings.</p>
<p>Examples can be found <a class="reference external" href="https://github.com/ucb-bar/berkeley-hardfloat/blob/master/README.md">here</a></p>
<div class="section" id="zero">
<h3>Zero<a class="headerlink" href="#zero" title="Permalink to this headline">¶</a></h3>
<p>The zero is encoded with the three leading zeros of the exponent field being stuck to zero.</p>
</div>
<div class="section" id="denormalized-values">
<h3>Denormalized values<a class="headerlink" href="#denormalized-values" title="Permalink to this headline">¶</a></h3>
<p>Denormalized values are encoded in the same way as a normal floating point number. The mantissa is shifted so that the first one
becomes implicit. The exponent is encoded as 107 (decimal) plus the index of the highest bit set to 1.</p>
</div>
<div class="section" id="normalized-values">
<h3>Normalized values<a class="headerlink" href="#normalized-values" title="Permalink to this headline">¶</a></h3>
<p>The recoded mantissa for normalized values is exactly the same as the original IEEE-754 mantissa. The recoded exponent
is encoded as 130 (decimal) plus the original exponent value.</p>
</div>
<div class="section" id="infinity">
<h3>Infinity<a class="headerlink" href="#infinity" title="Permalink to this headline">¶</a></h3>
<p>The recoded mantissa value is treated as don’t care. The recoded exponent three highest bits is 6 (decimal), the rest of the exponent can be treated as don’t care.</p>
</div>
<div class="section" id="nan">
<h3>NaN<a class="headerlink" href="#nan" title="Permalink to this headline">¶</a></h3>
<p>The recoded mantissa for normalized values is exactly the same as the original IEEE-754 mantissa. The recoded exponent three highest bits is 7 (decimal), the rest of the exponent can be treated as don’t care.</p>
</div>
</div>
</div>
<div class="section" id="declaration">
<h1>Declaration<a class="headerlink" href="#declaration" title="Permalink to this headline">¶</a></h1>
<p>The syntax to declare a floating point number is as follows:</p>
<div class="section" id="ieee-754-number">
<h2>IEEE-754 Number<a class="headerlink" href="#ieee-754-number" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Floating(exponentSize: Int, mantissaSize: Int)</td>
<td>IEEE-754 Floating point value with a custom exponent and mantissa size</td>
</tr>
<tr class="row-odd"><td>Floating16()</td>
<td>IEEE-754 Half floating point number</td>
</tr>
<tr class="row-even"><td>Floating32()</td>
<td>IEEE-754 Single floating point number</td>
</tr>
<tr class="row-odd"><td>Floating64()</td>
<td>IEEE-754 Double floating point number</td>
</tr>
<tr class="row-even"><td>Floating128()</td>
<td>IEEE-754 Quad floating point number</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="recoded-floating-point-number">
<h2>Recoded floating point number<a class="headerlink" href="#recoded-floating-point-number" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Syntax</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RecFloating(exponentSize: Int, mantissaSize: Int)</td>
<td>Recoded Floating point value with a custom exponent and mantissa size</td>
</tr>
<tr class="row-odd"><td>RecFloating16()</td>
<td>Recoded Half floating point number</td>
</tr>
<tr class="row-even"><td>RecFloating32()</td>
<td>Recoded Single floating point number</td>
</tr>
<tr class="row-odd"><td>RecFloating64()</td>
<td>Recoded Double floating point number</td>
</tr>
<tr class="row-even"><td>RecFloating128()</td>
<td>Recoded Quad floating point number</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="operators">
<h1>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h1>
<p>The following operators are available for the <code class="docutils literal notranslate"><span class="pre">Floating</span></code> and <code class="docutils literal notranslate"><span class="pre">RecFloating</span></code> types</p>
<div class="section" id="type-cast">
<h2>Type cast<a class="headerlink" href="#type-cast" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Description</th>
<th class="head">Return</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x.asBits</td>
<td>Binary cast in Bits</td>
<td>Bits(w(x) bits)</td>
</tr>
<tr class="row-odd"><td>x.asBools</td>
<td>Cast into a array of Bool</td>
<td>Vec(Bool,width(x))</td>
</tr>
<tr class="row-even"><td>x.toUInt(size: Int)</td>
<td>Return the corresponding UInt (with truncation)</td>
<td>UInt</td>
</tr>
<tr class="row-odd"><td>x.toSInt(size: Int)</td>
<td>Return the corresponding SInt (with truncation)</td>
<td>SInt</td>
</tr>
<tr class="row-even"><td>x.fromUInt</td>
<td>Return the corresponding Floating (with truncation)</td>
<td>UInt</td>
</tr>
<tr class="row-odd"><td>x.fromSInt</td>
<td>Return the corresponding Floating (with truncation)</td>
<td>SInt</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, penis

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>